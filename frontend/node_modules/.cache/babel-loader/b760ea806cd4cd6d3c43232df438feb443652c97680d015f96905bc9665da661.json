{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { createGuards, createMachine, mergeProps } from '@zag-js/core';\nimport { isHTMLElement, contains, raf, getComputedStyle as getComputedStyle$1, getWindow, dataAttr, waitForPromise } from '@zag-js/dom-query';\nexport { waitForElement, waitForPromise } from '@zag-js/dom-query';\nimport { getPlacement, getPlacementStyles } from '@zag-js/popper';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\nimport { trapFocus } from '@zag-js/focus-trap';\nimport { trackInteractOutside } from '@zag-js/interact-outside';\nimport { isString, nextIndex, prevIndex, isEqual, warn, createSplitProps } from '@zag-js/utils';\nimport { createProps } from '@zag-js/types';\n\n// src/tour.anatomy.ts\nvar anatomy = createAnatomy(\"tour\").parts(\"content\", \"actionTrigger\", \"closeTrigger\", \"progressText\", \"title\", \"description\", \"positioner\", \"arrow\", \"arrowTip\", \"backdrop\", \"spotlight\");\nvar parts = anatomy.build();\nvar getPositionerId = ctx => ctx.ids?.positioner ?? `tour-positioner-${ctx.id}`;\nvar getContentId = ctx => ctx.ids?.content ?? `tour-content-${ctx.id}`;\nvar getTitleId = ctx => ctx.ids?.title ?? `tour-title-${ctx.id}`;\nvar getDescriptionId = ctx => ctx.ids?.description ?? `tour-desc-${ctx.id}`;\nvar getArrowId = ctx => ctx.ids?.arrow ?? `tour-arrow-${ctx.id}`;\nvar getBackdropId = ctx => ctx.ids?.backdrop ?? `tour-backdrop-${ctx.id}`;\nvar getContentEl = ctx => ctx.getById(getContentId(ctx));\nvar getPositionerEl = ctx => ctx.getById(getPositionerId(ctx));\nvar getBackdropEl = ctx => ctx.getById(getBackdropId(ctx));\nfunction syncZIndex(scope) {\n  return raf(() => {\n    const contentEl = getContentEl(scope);\n    if (!contentEl) return;\n    const styles = getComputedStyle$1(contentEl);\n    const positionerEl = getPositionerEl(scope);\n    const backdropEl = getBackdropEl(scope);\n    if (positionerEl) {\n      positionerEl.style.setProperty(\"--z-index\", styles.zIndex);\n      positionerEl.style.setProperty(\"z-index\", \"var(--z-index)\");\n    }\n    if (backdropEl) {\n      backdropEl.style.setProperty(\"--z-index\", styles.zIndex);\n    }\n  });\n}\n\n// src/utils/clip-path.ts\nfunction getClipPath(options) {\n  const {\n    radius = 0,\n    rootSize: {\n      width: w,\n      height: h\n    },\n    rect: {\n      width,\n      height,\n      x,\n      y\n    },\n    enabled = true\n  } = options;\n  if (!enabled) return \"\";\n  const {\n    topLeft = 0,\n    topRight = 0,\n    bottomRight = 0,\n    bottomLeft = 0\n  } = typeof radius === \"number\" ? {\n    topLeft: radius,\n    topRight: radius,\n    bottomRight: radius,\n    bottomLeft: radius\n  } : radius;\n  return `M${w},${h}  H0  V0  H${w}  V${h}  Z  M${x + topLeft},${y}  a${topLeft},${topLeft},0,0,0-${topLeft},${topLeft}  V${height + y - bottomLeft}  a${bottomLeft},${bottomLeft},0,0,0,${bottomLeft},${bottomLeft}  H${width + x - bottomRight}  a${bottomRight},${bottomRight},0,0,0,${bottomRight}-${bottomRight}  V${y + topRight}  a${topRight},${topRight},0,0,0-${topRight}-${topRight}  Z`;\n}\n\n// src/utils/step.ts\nvar isTooltipStep = step => {\n  return step?.type === \"tooltip\";\n};\nvar isDialogStep = step => {\n  return step?.type === \"dialog\";\n};\nvar isWaitStep = step => {\n  return step?.type === \"wait\";\n};\nvar getEffectiveSteps = steps => {\n  return steps.filter(step => step.type !== \"wait\");\n};\nvar getProgress = (steps, stepIndex) => {\n  const effectiveLength = getEffectiveSteps(steps).length;\n  return (stepIndex + 1) / effectiveLength;\n};\nvar getEffectiveStepIndex = (steps, stepId) => {\n  const effectiveSteps = getEffectiveSteps(steps);\n  return findStepIndex(effectiveSteps, stepId);\n};\nvar isTooltipPlacement = placement => {\n  return placement != null && placement != \"center\";\n};\nvar normalizeStep = step => {\n  if (step.type === \"floating\") {\n    return {\n      backdrop: false,\n      arrow: false,\n      placement: \"bottom-end\",\n      ...step\n    };\n  }\n  if (step.target == null || step.type === \"dialog\") {\n    return {\n      type: \"dialog\",\n      placement: \"center\",\n      backdrop: true,\n      ...step\n    };\n  }\n  if (!step.type || step.type === \"tooltip\") {\n    return {\n      type: \"tooltip\",\n      arrow: true,\n      backdrop: true,\n      ...step\n    };\n  }\n  return step;\n};\nvar findStep = (steps, id) => {\n  const res = id != null ? steps.find(step => step.id === id) : null;\n  return res ? normalizeStep(res) : null;\n};\nvar findStepIndex = (steps, id) => {\n  return id != null ? steps.findIndex(step => step.id === id) : -1;\n};\n\n// src/tour.connect.ts\nfunction connect(service, normalize) {\n  const {\n    state,\n    context,\n    computed,\n    send,\n    prop,\n    scope\n  } = service;\n  const open = state.hasTag(\"open\");\n  const steps = Array.from(context.get(\"steps\"));\n  const stepIndex = computed(\"stepIndex\");\n  const step = computed(\"step\");\n  const hasTarget = typeof step?.target?.() !== \"undefined\";\n  const hasNextStep = computed(\"hasNextStep\");\n  const hasPrevStep = computed(\"hasPrevStep\");\n  const firstStep = computed(\"isFirstStep\");\n  const lastStep = computed(\"isLastStep\");\n  const placement = context.get(\"currentPlacement\");\n  const targetRect = context.get(\"targetRect\");\n  const popperStyles = getPlacementStyles({\n    strategy: \"absolute\",\n    placement: isTooltipPlacement(placement) ? placement : void 0\n  });\n  const clipPath = getClipPath({\n    enabled: isTooltipStep(step),\n    rect: targetRect,\n    rootSize: context.get(\"boundarySize\"),\n    radius: prop(\"spotlightRadius\")\n  });\n  const actionMap = {\n    next() {\n      send({\n        type: \"STEP.NEXT\",\n        src: \"actionTrigger\"\n      });\n    },\n    prev() {\n      send({\n        type: \"STEP.PREV\",\n        src: \"actionTrigger\"\n      });\n    },\n    dismiss() {\n      send({\n        type: \"DISMISS\",\n        src: \"actionTrigger\"\n      });\n    },\n    skip() {\n      send({\n        type: \"SKIP\",\n        src: \"actionTrigger\"\n      });\n    },\n    goto(id) {\n      send({\n        type: \"STEP.SET\",\n        value: id,\n        src: \"actionTrigger\"\n      });\n    }\n  };\n  return {\n    open,\n    totalSteps: steps.length,\n    stepIndex,\n    step,\n    hasNextStep,\n    hasPrevStep,\n    firstStep,\n    lastStep,\n    addStep(step2) {\n      const next = steps.concat(step2);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"addStep\"\n      });\n    },\n    removeStep(id) {\n      const next = steps.filter(step2 => step2.id !== id);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"removeStep\"\n      });\n    },\n    updateStep(id, stepOverrides) {\n      const next = steps.map(step2 => step2.id === id ? mergeProps(step2, stepOverrides) : step2);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"updateStep\"\n      });\n    },\n    setSteps(steps2) {\n      send({\n        type: \"STEPS.SET\",\n        value: steps2,\n        src: \"setSteps\"\n      });\n    },\n    setStep(id) {\n      send({\n        type: \"STEP.SET\",\n        value: id\n      });\n    },\n    start(id) {\n      send({\n        type: \"START\",\n        value: id\n      });\n    },\n    isValidStep(id) {\n      return steps.some(step2 => step2.id === id);\n    },\n    isCurrentStep(id) {\n      return Boolean(step?.id === id);\n    },\n    next() {\n      send({\n        type: \"STEP.NEXT\"\n      });\n    },\n    prev() {\n      send({\n        type: \"STEP.PREV\"\n      });\n    },\n    getProgressPercent() {\n      const index = getEffectiveStepIndex(steps, step?.id);\n      const total = getEffectiveSteps(steps).length;\n      return (index + 1) / total * 100;\n    },\n    getProgressText() {\n      const index = getEffectiveStepIndex(steps, step?.id);\n      const total = getEffectiveSteps(steps).length;\n      const details = {\n        current: index,\n        total\n      };\n      return prop(\"translations\").progressText?.(details) ?? \"\";\n    },\n    getBackdropProps() {\n      return normalize.element({\n        ...parts.backdrop.attrs,\n        id: getBackdropId(scope),\n        dir: prop(\"dir\"),\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        style: {\n          \"--tour-layer\": 0,\n          clipPath: isTooltipStep(step) ? `path(\"${clipPath}\")` : void 0,\n          position: \"absolute\",\n          inset: \"0\",\n          willChange: \"clip-path\"\n        }\n      });\n    },\n    getSpotlightProps() {\n      return normalize.element({\n        ...parts.spotlight.attrs,\n        hidden: !open || !step?.target?.(),\n        style: {\n          \"--tour-layer\": 1,\n          position: \"absolute\",\n          width: `${targetRect.width}px`,\n          height: `${targetRect.height}px`,\n          left: `${targetRect.x}px`,\n          top: `${targetRect.y}px`,\n          borderRadius: `${prop(\"spotlightRadius\")}px`,\n          pointerEvents: \"none\"\n        }\n      });\n    },\n    getProgressTextProps() {\n      return normalize.element({\n        ...parts.progressText.attrs\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        ...parts.positioner.attrs,\n        dir: prop(\"dir\"),\n        id: getPositionerId(scope),\n        \"data-type\": step?.type,\n        \"data-placement\": placement,\n        style: {\n          \"--tour-layer\": 2,\n          ...(step?.type === \"tooltip\" && popperStyles.floating)\n        }\n      });\n    },\n    getArrowProps() {\n      return normalize.element({\n        id: getArrowId(scope),\n        ...parts.arrow.attrs,\n        dir: prop(\"dir\"),\n        hidden: step?.type !== \"tooltip\",\n        style: step?.type === \"tooltip\" ? popperStyles.arrow : void 0,\n        opacity: hasTarget ? void 0 : 0\n      });\n    },\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: prop(\"dir\"),\n        style: popperStyles.arrowTip\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        id: getContentId(scope),\n        dir: prop(\"dir\"),\n        role: \"alertdialog\",\n        \"aria-modal\": \"true\",\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        \"data-placement\": placement,\n        \"data-step\": step?.id,\n        \"aria-labelledby\": getTitleId(scope),\n        \"aria-describedby\": getDescriptionId(scope),\n        tabIndex: -1,\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!prop(\"keyboardNavigation\")) return;\n          const isRtl = prop(\"dir\") === \"rtl\";\n          switch (event.key) {\n            case \"ArrowRight\":\n              if (!hasNextStep) return;\n              send({\n                type: isRtl ? \"STEP.PREV\" : \"STEP.NEXT\",\n                src: \"keydown\"\n              });\n              break;\n            case \"ArrowLeft\":\n              if (!hasPrevStep) return;\n              send({\n                type: isRtl ? \"STEP.NEXT\" : \"STEP.PREV\",\n                src: \"keydown\"\n              });\n              break;\n          }\n        }\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: getTitleId(scope),\n        \"data-placement\": hasTarget ? placement : \"center\"\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: getDescriptionId(scope),\n        \"data-placement\": hasTarget ? placement : \"center\"\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.element({\n        ...parts.closeTrigger.attrs,\n        \"data-type\": step?.type,\n        \"aria-label\": prop(\"translations\").close,\n        onClick: actionMap.dismiss\n      });\n    },\n    getActionTriggerProps(props2) {\n      const {\n        action,\n        attrs\n      } = props2.action;\n      let actionProps = {};\n      switch (action) {\n        case \"next\":\n          actionProps = {\n            \"data-type\": \"next\",\n            disabled: !hasNextStep,\n            \"data-disabled\": dataAttr(!hasNextStep),\n            \"aria-label\": prop(\"translations\").nextStep,\n            onClick: actionMap.next\n          };\n          break;\n        case \"prev\":\n          actionProps = {\n            \"data-type\": \"prev\",\n            disabled: !hasPrevStep,\n            \"data-disabled\": dataAttr(!hasPrevStep),\n            \"aria-label\": prop(\"translations\").prevStep,\n            onClick: actionMap.prev\n          };\n          break;\n        case \"dismiss\":\n          actionProps = {\n            \"data-type\": \"close\",\n            \"aria-label\": prop(\"translations\").close,\n            onClick: actionMap.dismiss\n          };\n          break;\n        default:\n          actionProps = {\n            \"data-type\": \"custom\",\n            onClick() {\n              if (typeof action === \"function\") {\n                action(actionMap);\n              }\n            }\n          };\n          break;\n      }\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        ...attrs,\n        ...actionProps\n      });\n    }\n  };\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\nvar normalizeEventPoint = event => {\n  let clientX = event.clientX;\n  let clientY = event.clientY;\n  let win = event.view || window;\n  let frame = getFrameElement(win);\n  while (frame) {\n    const iframeRect = frame.getBoundingClientRect();\n    const css = getComputedStyle(frame);\n    const left = iframeRect.left + (frame.clientLeft + parseFloat(css.paddingLeft));\n    const top = iframeRect.top + (frame.clientTop + parseFloat(css.paddingTop));\n    clientX += left;\n    clientY += top;\n    win = getWindow(frame);\n    frame = getFrameElement(win);\n  }\n  return {\n    clientX,\n    clientY\n  };\n};\nfunction isEventInRect(rect, event) {\n  const {\n    clientX,\n    clientY\n  } = normalizeEventPoint(event);\n  return rect.y <= clientY && clientY <= rect.y + rect.height && rect.x <= clientX && clientX <= rect.x + rect.width;\n}\nfunction offset(r, i) {\n  const dx = i.x || 0;\n  const dy = i.y || 0;\n  return {\n    x: r.x - dx,\n    y: r.y - dy,\n    width: r.width + dx + dx,\n    height: r.height + dy + dy\n  };\n}\n\n// src/tour.machine.ts\nvar {\n  and\n} = createGuards();\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      preventInteraction: false,\n      closeOnInteractOutside: true,\n      closeOnEscape: true,\n      keyboardNavigation: true,\n      spotlightOffset: {\n        x: 10,\n        y: 10\n      },\n      spotlightRadius: 4,\n      ...props2,\n      translations: {\n        nextStep: \"next step\",\n        prevStep: \"previous step\",\n        close: \"close tour\",\n        progressText: ({\n          current,\n          total\n        }) => `${current + 1} of ${total}`,\n        skip: \"skip tour\",\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"tour.inactive\";\n  },\n  context({\n    prop,\n    bindable,\n    getContext\n  }) {\n    return {\n      steps: bindable(() => ({\n        defaultValue: prop(\"steps\") ?? [],\n        onChange(value) {\n          prop(\"onStepsChange\")?.({\n            steps: value\n          });\n        }\n      })),\n      stepId: bindable(() => ({\n        defaultValue: prop(\"stepId\"),\n        sync: true,\n        onChange(value) {\n          const context = getContext();\n          const steps = context.get(\"steps\");\n          const stepIndex = findStepIndex(steps, value);\n          const progress = getProgress(steps, stepIndex);\n          const complete = stepIndex == steps.length - 1;\n          prop(\"onStepChange\")?.({\n            stepId: value,\n            stepIndex,\n            totalSteps: steps.length,\n            complete,\n            progress\n          });\n        }\n      })),\n      resolvedTarget: bindable(() => ({\n        sync: true,\n        defaultValue: null\n      })),\n      targetRect: bindable(() => ({\n        defaultValue: {\n          width: 0,\n          height: 0,\n          x: 0,\n          y: 0\n        }\n      })),\n      boundarySize: bindable(() => ({\n        defaultValue: {\n          width: 0,\n          height: 0\n        }\n      })),\n      currentPlacement: bindable(() => ({\n        defaultValue: void 0\n      }))\n    };\n  },\n  computed: {\n    stepIndex: ({\n      context\n    }) => findStepIndex(context.get(\"steps\"), context.get(\"stepId\")),\n    step: ({\n      context\n    }) => findStep(context.get(\"steps\"), context.get(\"stepId\")),\n    hasNextStep: ({\n      context,\n      computed\n    }) => computed(\"stepIndex\") < context.get(\"steps\").length - 1,\n    hasPrevStep: ({\n      computed\n    }) => computed(\"stepIndex\") > 0,\n    isFirstStep: ({\n      computed\n    }) => computed(\"stepIndex\") === 0,\n    isLastStep: ({\n      context,\n      computed\n    }) => computed(\"stepIndex\") === context.get(\"steps\").length - 1,\n    progress: ({\n      context,\n      computed\n    }) => {\n      const effectiveLength = getEffectiveSteps(context.get(\"steps\")).length;\n      return (computed(\"stepIndex\") + 1) / effectiveLength;\n    }\n  },\n  watch({\n    track,\n    context,\n    action\n  }) {\n    track([() => context.get(\"stepId\")], () => {\n      queueMicrotask(() => {\n        action([\"setResolvedTarget\", \"raiseStepChange\", \"syncTargetAttrs\"]);\n      });\n    });\n  },\n  effects: [\"trackBoundarySize\"],\n  exit: [\"cleanupAll\"],\n  on: {\n    \"STEPS.SET\": {\n      actions: [\"setSteps\", \"validateSteps\"]\n    },\n    \"STEP.SET\": {\n      actions: [\"setStep\"]\n    },\n    \"STEP.NEXT\": {\n      actions: [\"setNextStep\"]\n    },\n    \"STEP.PREV\": {\n      actions: [\"setPrevStep\"]\n    },\n    \"STEP.CHANGED\": [{\n      guard: and(\"isValidStep\", \"hasResolvedTarget\"),\n      target: \"target.scrolling\",\n      actions: [\"cleanupStepEffect\"]\n    }, {\n      guard: and(\"isValidStep\", \"hasTarget\"),\n      target: \"target.resolving\",\n      actions: [\"cleanupStepEffect\"]\n    }, {\n      guard: and(\"isValidStep\", \"isWaitingStep\"),\n      target: \"step.waiting\",\n      actions: [\"cleanupStepEffect\"]\n    }, {\n      guard: \"isValidStep\",\n      target: \"tour.active\",\n      actions: [\"cleanupStepEffect\"]\n    }],\n    DISMISS: [{\n      guard: \"isLastStep\",\n      target: \"tour.inactive\",\n      actions: [\"cleanupAll\", \"invokeOnDismiss\", \"invokeOnComplete\", \"clearStep\"]\n    }, {\n      target: \"tour.inactive\",\n      actions: [\"cleanupAll\", \"invokeOnDismiss\", \"clearStep\"]\n    }],\n    SKIP: {\n      target: \"tour.inactive\",\n      actions: [\"cleanupAll\", \"invokeOnSkip\", \"clearStep\"]\n    }\n  },\n  states: {\n    \"tour.inactive\": {\n      tags: [\"closed\"],\n      entry: [\"validateSteps\"],\n      on: {\n        START: {\n          actions: [\"setInitialStep\", \"invokeOnStart\"]\n        }\n      }\n    },\n    \"target.resolving\": {\n      tags: [\"closed\"],\n      effects: [\"waitForTarget\", \"waitForTargetTimeout\"],\n      on: {\n        \"TARGET.NOT_FOUND\": {\n          target: \"tour.inactive\",\n          actions: [\"invokeOnNotFound\", \"clearStep\"]\n        },\n        \"TARGET.RESOLVED\": {\n          target: \"target.scrolling\",\n          actions: [\"setResolvedTarget\"]\n        }\n      }\n    },\n    \"target.scrolling\": {\n      tags: [\"open\"],\n      entry: [\"scrollToTarget\"],\n      effects: [\"waitForScrollEnd\", \"trapFocus\", \"trackPlacement\", \"trackDismissableBranch\", \"trackInteractOutside\", \"trackEscapeKeydown\"],\n      on: {\n        \"SCROLL.END\": {\n          target: \"tour.active\"\n        }\n      }\n    },\n    \"step.waiting\": {\n      tags: [\"closed\"]\n    },\n    \"tour.active\": {\n      tags: [\"open\"],\n      effects: [\"trapFocus\", \"trackPlacement\", \"trackDismissableBranch\", \"trackInteractOutside\", \"trackEscapeKeydown\"]\n    }\n  },\n  implementations: {\n    guards: {\n      isLastStep: ({\n        computed,\n        context\n      }) => computed(\"stepIndex\") === context.get(\"steps\").length - 1,\n      isValidStep: ({\n        context\n      }) => context.get(\"stepId\") != null,\n      hasTarget: ({\n        computed\n      }) => computed(\"step\")?.target != null,\n      hasResolvedTarget: ({\n        context\n      }) => context.get(\"resolvedTarget\") != null,\n      isWaitingStep: ({\n        computed\n      }) => computed(\"step\")?.type === \"wait\"\n    },\n    actions: {\n      scrollToTarget({\n        context\n      }) {\n        const node = context.get(\"resolvedTarget\");\n        node?.scrollIntoView({\n          behavior: \"instant\",\n          block: \"center\",\n          inline: \"center\"\n        });\n      },\n      setSteps(params) {\n        const {\n          event,\n          context\n        } = params;\n        context.set(\"steps\", event.value);\n      },\n      setStep(params) {\n        const {\n          event\n        } = params;\n        const step = event.value;\n        if (step == null) return;\n        const manager = new StepManager(params);\n        manager.transitionToStep(step);\n      },\n      clearStep(params) {\n        const manager = new StepManager(params);\n        manager.clear();\n      },\n      setInitialStep(params) {\n        const {\n          context,\n          event\n        } = params;\n        const steps = context.get(\"steps\");\n        if (steps.length === 0) return;\n        const manager = new StepManager(params);\n        manager.transitionToStep(event.value ?? 0);\n      },\n      setNextStep(params) {\n        const {\n          computed\n        } = params;\n        const manager = new StepManager(params);\n        manager.next(computed(\"stepIndex\"));\n      },\n      setPrevStep(params) {\n        const {\n          computed\n        } = params;\n        const manager = new StepManager(params);\n        manager.prev(computed(\"stepIndex\"));\n      },\n      invokeOnStart({\n        prop,\n        context,\n        computed\n      }) {\n        prop(\"onStatusChange\")?.({\n          status: \"started\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnDismiss({\n        prop,\n        context,\n        computed\n      }) {\n        prop(\"onStatusChange\")?.({\n          status: \"dismissed\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnComplete({\n        prop,\n        context,\n        computed\n      }) {\n        prop(\"onStatusChange\")?.({\n          status: \"completed\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnSkip({\n        prop,\n        context,\n        computed\n      }) {\n        prop(\"onStatusChange\")?.({\n          status: \"skipped\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnNotFound({\n        prop,\n        context,\n        computed\n      }) {\n        prop(\"onStatusChange\")?.({\n          status: \"not-found\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      raiseStepChange({\n        send\n      }) {\n        send({\n          type: \"STEP.CHANGED\"\n        });\n      },\n      setResolvedTarget({\n        context,\n        event,\n        computed\n      }) {\n        const node = event.node ?? computed(\"step\")?.target?.();\n        context.set(\"resolvedTarget\", node ?? null);\n      },\n      syncTargetAttrs(params) {\n        const {\n          context\n        } = params;\n        const targetEl = context.get(\"resolvedTarget\");\n        const manager = new StepManager(params);\n        manager.syncTarget(targetEl);\n      },\n      cleanupAll(params) {\n        const manager = new StepManager(params);\n        manager.cleanupAll();\n      },\n      cleanupStepEffect(params) {\n        const manager = new StepManager(params);\n        manager.cleanupStepEffect();\n      },\n      validateSteps({\n        context\n      }) {\n        const ids = /* @__PURE__ */new Set();\n        context.get(\"steps\").forEach(step => {\n          if (ids.has(step.id)) {\n            throw new Error(`[zag-js/tour] Duplicate step id: ${step.id}`);\n          }\n          if (step.target == null && step.type == null) {\n            throw new Error(`[zag-js/tour] Step ${step.id} has no target or type. At least one of those is required.`);\n          }\n          ids.add(step.id);\n        });\n      }\n    },\n    effects: {\n      waitForScrollEnd({\n        send\n      }) {\n        const id = setTimeout(() => {\n          send({\n            type: \"SCROLL.END\"\n          });\n        }, 100);\n        return () => clearTimeout(id);\n      },\n      waitForTargetTimeout({\n        send\n      }) {\n        const id = setTimeout(() => {\n          send({\n            type: \"TARGET.NOT_FOUND\"\n          });\n        }, 3e3);\n        return () => clearTimeout(id);\n      },\n      waitForTarget({\n        scope,\n        computed,\n        send\n      }) {\n        const step = computed(\"step\");\n        if (!step) return;\n        const targetEl = step.target;\n        const win = scope.getWin();\n        const rootNode = scope.getRootNode();\n        const observer = new win.MutationObserver(() => {\n          const node = targetEl?.();\n          if (node) {\n            send({\n              type: \"TARGET.RESOLVED\",\n              node\n            });\n            observer.disconnect();\n          }\n        });\n        observer.observe(rootNode, {\n          childList: true,\n          subtree: true,\n          characterData: true\n        });\n        return () => {\n          observer.disconnect();\n        };\n      },\n      trackBoundarySize({\n        context,\n        scope\n      }) {\n        const win = scope.getWin();\n        const doc = scope.getDoc();\n        const onResize = () => {\n          const width = visualViewport?.width ?? win.innerWidth;\n          const height = doc.documentElement.scrollHeight;\n          context.set(\"boundarySize\", {\n            width,\n            height\n          });\n        };\n        onResize();\n        const viewport = win.visualViewport ?? win;\n        viewport.addEventListener(\"resize\", onResize);\n        return () => viewport.removeEventListener(\"resize\", onResize);\n      },\n      trackEscapeKeydown({\n        scope,\n        send,\n        prop\n      }) {\n        if (!prop(\"closeOnEscape\")) return;\n        const doc = scope.getDoc();\n        const onKeyDown = event => {\n          if (event.key === \"Escape\") {\n            event.preventDefault();\n            event.stopPropagation();\n            send({\n              type: \"DISMISS\",\n              src: \"esc\"\n            });\n          }\n        };\n        doc.addEventListener(\"keydown\", onKeyDown, true);\n        return () => {\n          doc.removeEventListener(\"keydown\", onKeyDown, true);\n        };\n      },\n      trackInteractOutside({\n        context,\n        computed,\n        scope,\n        send,\n        prop\n      }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trackInteractOutside(contentEl, {\n          defer: true,\n          exclude(target) {\n            return contains(step.target?.(), target);\n          },\n          onFocusOutside(event) {\n            prop(\"onFocusOutside\")?.(event);\n            if (!prop(\"closeOnInteractOutside\")) {\n              event.preventDefault();\n            }\n          },\n          onPointerDownOutside(event) {\n            prop(\"onPointerDownOutside\")?.(event);\n            const isWithin = isEventInRect(context.get(\"targetRect\"), event.detail.originalEvent);\n            if (isWithin) {\n              event.preventDefault();\n              return;\n            }\n            if (!prop(\"closeOnInteractOutside\")) {\n              event.preventDefault();\n            }\n          },\n          onInteractOutside(event) {\n            prop(\"onInteractOutside\")?.(event);\n            if (event.defaultPrevented) return;\n            send({\n              type: \"DISMISS\",\n              src: \"interact-outside\"\n            });\n          }\n        });\n      },\n      trackDismissableBranch({\n        computed,\n        scope\n      }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trackDismissableBranch(contentEl, {\n          defer: true\n        });\n      },\n      trapFocus({\n        computed,\n        scope\n      }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trapFocus(contentEl, {\n          escapeDeactivates: false,\n          allowOutsideClick: true,\n          preventScroll: true,\n          returnFocusOnDeactivate: false,\n          getShadowRoot: true\n        });\n      },\n      trackPlacement({\n        context,\n        computed,\n        scope,\n        prop\n      }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        context.set(\"currentPlacement\", step.placement ?? \"bottom\");\n        if (isDialogStep(step)) {\n          return syncZIndex(scope);\n        }\n        if (!isTooltipStep(step)) {\n          return;\n        }\n        const positionerEl = () => getPositionerEl(scope);\n        return getPlacement(context.get(\"resolvedTarget\"), positionerEl, {\n          defer: true,\n          placement: step.placement ?? \"bottom\",\n          strategy: \"absolute\",\n          gutter: 10,\n          offset: step.offset,\n          getAnchorRect(el) {\n            if (!isHTMLElement(el)) return null;\n            const rect = el.getBoundingClientRect();\n            return offset(rect, prop(\"spotlightOffset\"));\n          },\n          onComplete(data) {\n            const {\n              rects\n            } = data.middlewareData;\n            context.set(\"currentPlacement\", data.placement);\n            context.set(\"targetRect\", rects.reference);\n          }\n        });\n      }\n    }\n  }\n});\nvar StepManager = class {\n  constructor(params) {\n    this.params = params;\n  }\n  /**\n   * Transition to a step by id or index\n   */\n  transitionToStep(step) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = isString(step) ? findStepIndex(steps, step) : step;\n    this.transitionTo(idx);\n  }\n  /**\n   * Transition to the next step from the given index\n   */\n  next(currentIndex) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = nextIndex(steps, currentIndex);\n    this.transitionTo(idx);\n  }\n  /**\n   * Transition to the previous step from the given index\n   */\n  prev(currentIndex) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = prevIndex(steps, currentIndex);\n    this.transitionTo(idx);\n  }\n  /**\n   * Clear the current step and reset tour state\n   */\n  clear() {\n    const {\n      context\n    } = this.params;\n    context.set(\"targetRect\", {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    });\n    context.set(\"resolvedTarget\", null);\n    this.transitionTo(-1);\n  }\n  /**\n   * Cleanup all resources including effects, target attributes, and resolved target.\n   * Use when completely tearing down the tour or transitioning between steps.\n   */\n  cleanupAll() {\n    const {\n      refs\n    } = this.params;\n    refs.get(\"_targetCleanup\")?.();\n    refs.set(\"_targetCleanup\", void 0);\n    refs.set(\"_prevTarget\", void 0);\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n  }\n  /**\n   * Cleanup only the step effect cleanup function.\n   * Skips cleanup if an effect is currently running.\n   */\n  cleanupStepEffect() {\n    const {\n      refs\n    } = this.params;\n    if (refs.get(\"_runningEffect\")) {\n      return;\n    }\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n  }\n  /**\n   * Sync target element attributes (inert, data-tour-highlighted).\n   * Handles cleanup of previous target and applies attributes to new target.\n   */\n  syncTarget(targetEl) {\n    const {\n      refs,\n      prop\n    } = this.params;\n    const prevTarget = refs.get(\"_prevTarget\");\n    if (targetEl !== prevTarget) {\n      refs.get(\"_targetCleanup\")?.();\n      refs.set(\"_targetCleanup\", void 0);\n    }\n    if (!targetEl) {\n      refs.set(\"_prevTarget\", null);\n      return;\n    }\n    if (targetEl === prevTarget) {\n      return;\n    }\n    if (prop(\"preventInteraction\")) targetEl.inert = true;\n    targetEl.setAttribute(\"data-tour-highlighted\", \"\");\n    refs.set(\"_targetCleanup\", () => {\n      if (prop(\"preventInteraction\")) targetEl.inert = false;\n      targetEl.removeAttribute(\"data-tour-highlighted\");\n    });\n    refs.set(\"_prevTarget\", targetEl);\n  }\n  /**\n   * Transition to a step by index\n   */\n  transitionTo(idx) {\n    const {\n      context,\n      refs\n    } = this.params;\n    const steps = context.get(\"steps\");\n    const step = steps[idx];\n    if (!step) {\n      context.set(\"stepId\", null);\n      return;\n    }\n    if (isEqual(context.get(\"stepId\"), step.id)) {\n      refs.set(\"_runningEffect\", false);\n      return;\n    }\n    this.cleanup();\n    const utilities = this.createUtilities(step, idx);\n    if (step.effect) {\n      this.executeEffect(step, utilities);\n    } else {\n      utilities.show();\n    }\n  }\n  /**\n   * Clean up previous step effects and target attributes\n   */\n  cleanup() {\n    const {\n      refs\n    } = this.params;\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n    refs.get(\"_targetCleanup\")?.();\n    refs.set(\"_targetCleanup\", void 0);\n  }\n  /**\n   * Create utility functions for step effects\n   */\n  createUtilities(step, idx) {\n    const {\n      context,\n      computed,\n      prop\n    } = this.params;\n    const steps = context.get(\"steps\");\n    return {\n      show: () => {\n        context.set(\"stepId\", step.id);\n      },\n      update: data => {\n        context.set(\"steps\", prev => prev.map((s, i) => i === idx ? {\n          ...s,\n          ...data\n        } : s));\n      },\n      next: () => {\n        const nextIdx = nextIndex(steps, computed(\"stepIndex\"));\n        this.transitionTo(nextIdx);\n      },\n      goto: id => {\n        const targetIdx = findStepIndex(steps, id);\n        if (targetIdx === -1) {\n          warn(`[zag-js/tour] Step with id \"${id}\" not found`);\n          return;\n        }\n        this.transitionTo(targetIdx);\n      },\n      dismiss: () => {\n        context.set(\"stepId\", null);\n        prop(\"onStatusChange\")?.({\n          status: \"dismissed\",\n          stepId: null,\n          stepIndex: -1\n        });\n      },\n      target: step.target\n    };\n  }\n  /**\n   * Execute a step's effect function\n   */\n  executeEffect(step, utilities) {\n    const {\n      refs\n    } = this.params;\n    refs.set(\"_runningEffect\", true);\n    let cleanup;\n    try {\n      cleanup = step.effect(utilities);\n    } catch (error) {\n      refs.set(\"_runningEffect\", false);\n      console.error(error);\n      return;\n    }\n    refs.set(\"_effectCleanup\", cleanup);\n    if (isWaitStep(step)) {\n      utilities.show();\n    }\n    queueMicrotask(() => {\n      queueMicrotask(() => {\n        refs.set(\"_runningEffect\", false);\n      });\n    });\n  }\n};\nvar props = createProps()([\"closeOnEscape\", \"closeOnInteractOutside\", \"dir\", \"getRootNode\", \"id\", \"ids\", \"keyboardNavigation\", \"onFocusOutside\", \"onInteractOutside\", \"onPointerDownOutside\", \"onStatusChange\", \"onStepChange\", \"onStepsChange\", \"preventInteraction\", \"spotlightOffset\", \"spotlightRadius\", \"stepId\", \"steps\", \"translations\"]);\nvar splitProps = createSplitProps(props);\nfunction waitForElementValue(target, value, options) {\n  const {\n    timeout,\n    rootNode\n  } = options;\n  const win = getWindow(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(new Promise(resolve => {\n    const el = target();\n    if (!el) return;\n    const checkValue = () => {\n      if (el.value === value) {\n        resolve();\n        el.removeEventListener(\"input\", checkValue);\n      }\n    };\n    checkValue();\n    el.addEventListener(\"input\", checkValue, {\n      signal: controller.signal\n    });\n  }), controller, timeout);\n}\nexport { anatomy, connect, machine, props, splitProps, waitForElementValue };","map":{"version":3,"names":["createAnatomy","createGuards","createMachine","mergeProps","isHTMLElement","contains","raf","getComputedStyle","getComputedStyle$1","getWindow","dataAttr","waitForPromise","waitForElement","getPlacement","getPlacementStyles","trackDismissableBranch","trapFocus","trackInteractOutside","isString","nextIndex","prevIndex","isEqual","warn","createSplitProps","createProps","anatomy","parts","build","getPositionerId","ctx","ids","positioner","id","getContentId","content","getTitleId","title","getDescriptionId","description","getArrowId","arrow","getBackdropId","backdrop","getContentEl","getById","getPositionerEl","getBackdropEl","syncZIndex","scope","contentEl","styles","positionerEl","backdropEl","style","setProperty","zIndex","getClipPath","options","radius","rootSize","width","w","height","h","rect","x","y","enabled","topLeft","topRight","bottomRight","bottomLeft","isTooltipStep","step","type","isDialogStep","isWaitStep","getEffectiveSteps","steps","filter","getProgress","stepIndex","effectiveLength","length","getEffectiveStepIndex","stepId","effectiveSteps","findStepIndex","isTooltipPlacement","placement","normalizeStep","target","findStep","res","find","findIndex","connect","service","normalize","state","context","computed","send","prop","open","hasTag","Array","from","get","hasTarget","hasNextStep","hasPrevStep","firstStep","lastStep","targetRect","popperStyles","strategy","clipPath","actionMap","next","src","prev","dismiss","skip","goto","value","totalSteps","addStep","step2","concat","removeStep","updateStep","stepOverrides","map","setSteps","steps2","setStep","start","isValidStep","some","isCurrentStep","Boolean","getProgressPercent","index","total","getProgressText","details","current","progressText","getBackdropProps","element","attrs","dir","hidden","position","inset","willChange","getSpotlightProps","spotlight","left","top","borderRadius","pointerEvents","getProgressTextProps","getPositionerProps","floating","getArrowProps","opacity","getArrowTipProps","arrowTip","getContentProps","role","tabIndex","onKeyDown","event","defaultPrevented","isRtl","key","getTitleProps","getDescriptionProps","getCloseTriggerProps","closeTrigger","close","onClick","getActionTriggerProps","props2","action","actionProps","disabled","nextStep","prevStep","button","actionTrigger","getFrameElement","win","parent","Object","getPrototypeOf","frameElement","normalizeEventPoint","clientX","clientY","view","window","frame","iframeRect","getBoundingClientRect","css","clientLeft","parseFloat","paddingLeft","clientTop","paddingTop","isEventInRect","offset","r","i","dx","dy","and","machine","props","preventInteraction","closeOnInteractOutside","closeOnEscape","keyboardNavigation","spotlightOffset","spotlightRadius","translations","initialState","bindable","getContext","defaultValue","onChange","sync","progress","complete","resolvedTarget","boundarySize","currentPlacement","isFirstStep","isLastStep","watch","track","queueMicrotask","effects","exit","on","actions","guard","DISMISS","SKIP","states","tags","entry","START","implementations","guards","hasResolvedTarget","isWaitingStep","scrollToTarget","node","scrollIntoView","behavior","block","inline","params","set","manager","StepManager","transitionToStep","clearStep","clear","setInitialStep","setNextStep","setPrevStep","invokeOnStart","status","invokeOnDismiss","invokeOnComplete","invokeOnSkip","invokeOnNotFound","raiseStepChange","setResolvedTarget","syncTargetAttrs","targetEl","syncTarget","cleanupAll","cleanupStepEffect","validateSteps","Set","forEach","has","Error","add","waitForScrollEnd","setTimeout","clearTimeout","waitForTargetTimeout","waitForTarget","getWin","rootNode","getRootNode","observer","MutationObserver","disconnect","observe","childList","subtree","characterData","trackBoundarySize","doc","getDoc","onResize","visualViewport","innerWidth","documentElement","scrollHeight","viewport","addEventListener","removeEventListener","trackEscapeKeydown","preventDefault","stopPropagation","defer","exclude","onFocusOutside","onPointerDownOutside","isWithin","detail","originalEvent","onInteractOutside","escapeDeactivates","allowOutsideClick","preventScroll","returnFocusOnDeactivate","getShadowRoot","trackPlacement","gutter","getAnchorRect","el","onComplete","data","rects","middlewareData","reference","constructor","idx","transitionTo","currentIndex","refs","prevTarget","inert","setAttribute","removeAttribute","cleanup","utilities","createUtilities","effect","executeEffect","show","update","s","nextIdx","targetIdx","error","console","splitProps","waitForElementValue","timeout","controller","AbortController","Promise","resolve","checkValue","signal"],"sources":["D:/ML AI321- FALL 25/ML_PROJECT_HEALTHCARE_AAAHH/frontend/node_modules/@zag-js/tour/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { createGuards, createMachine, mergeProps } from '@zag-js/core';\nimport { isHTMLElement, contains, raf, getComputedStyle as getComputedStyle$1, getWindow, dataAttr, waitForPromise } from '@zag-js/dom-query';\nexport { waitForElement, waitForPromise } from '@zag-js/dom-query';\nimport { getPlacement, getPlacementStyles } from '@zag-js/popper';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\nimport { trapFocus } from '@zag-js/focus-trap';\nimport { trackInteractOutside } from '@zag-js/interact-outside';\nimport { isString, nextIndex, prevIndex, isEqual, warn, createSplitProps } from '@zag-js/utils';\nimport { createProps } from '@zag-js/types';\n\n// src/tour.anatomy.ts\nvar anatomy = createAnatomy(\"tour\").parts(\n  \"content\",\n  \"actionTrigger\",\n  \"closeTrigger\",\n  \"progressText\",\n  \"title\",\n  \"description\",\n  \"positioner\",\n  \"arrow\",\n  \"arrowTip\",\n  \"backdrop\",\n  \"spotlight\"\n);\nvar parts = anatomy.build();\nvar getPositionerId = (ctx) => ctx.ids?.positioner ?? `tour-positioner-${ctx.id}`;\nvar getContentId = (ctx) => ctx.ids?.content ?? `tour-content-${ctx.id}`;\nvar getTitleId = (ctx) => ctx.ids?.title ?? `tour-title-${ctx.id}`;\nvar getDescriptionId = (ctx) => ctx.ids?.description ?? `tour-desc-${ctx.id}`;\nvar getArrowId = (ctx) => ctx.ids?.arrow ?? `tour-arrow-${ctx.id}`;\nvar getBackdropId = (ctx) => ctx.ids?.backdrop ?? `tour-backdrop-${ctx.id}`;\nvar getContentEl = (ctx) => ctx.getById(getContentId(ctx));\nvar getPositionerEl = (ctx) => ctx.getById(getPositionerId(ctx));\nvar getBackdropEl = (ctx) => ctx.getById(getBackdropId(ctx));\nfunction syncZIndex(scope) {\n  return raf(() => {\n    const contentEl = getContentEl(scope);\n    if (!contentEl) return;\n    const styles = getComputedStyle$1(contentEl);\n    const positionerEl = getPositionerEl(scope);\n    const backdropEl = getBackdropEl(scope);\n    if (positionerEl) {\n      positionerEl.style.setProperty(\"--z-index\", styles.zIndex);\n      positionerEl.style.setProperty(\"z-index\", \"var(--z-index)\");\n    }\n    if (backdropEl) {\n      backdropEl.style.setProperty(\"--z-index\", styles.zIndex);\n    }\n  });\n}\n\n// src/utils/clip-path.ts\nfunction getClipPath(options) {\n  const {\n    radius = 0,\n    rootSize: { width: w, height: h },\n    rect: { width, height, x, y },\n    enabled = true\n  } = options;\n  if (!enabled) return \"\";\n  const {\n    topLeft = 0,\n    topRight = 0,\n    bottomRight = 0,\n    bottomLeft = 0\n  } = typeof radius === \"number\" ? { topLeft: radius, topRight: radius, bottomRight: radius, bottomLeft: radius } : radius;\n  return `M${w},${h}  H0  V0  H${w}  V${h}  Z  M${x + topLeft},${y}  a${topLeft},${topLeft},0,0,0-${topLeft},${topLeft}  V${height + y - bottomLeft}  a${bottomLeft},${bottomLeft},0,0,0,${bottomLeft},${bottomLeft}  H${width + x - bottomRight}  a${bottomRight},${bottomRight},0,0,0,${bottomRight}-${bottomRight}  V${y + topRight}  a${topRight},${topRight},0,0,0-${topRight}-${topRight}  Z`;\n}\n\n// src/utils/step.ts\nvar isTooltipStep = (step) => {\n  return step?.type === \"tooltip\";\n};\nvar isDialogStep = (step) => {\n  return step?.type === \"dialog\";\n};\nvar isWaitStep = (step) => {\n  return step?.type === \"wait\";\n};\nvar getEffectiveSteps = (steps) => {\n  return steps.filter((step) => step.type !== \"wait\");\n};\nvar getProgress = (steps, stepIndex) => {\n  const effectiveLength = getEffectiveSteps(steps).length;\n  return (stepIndex + 1) / effectiveLength;\n};\nvar getEffectiveStepIndex = (steps, stepId) => {\n  const effectiveSteps = getEffectiveSteps(steps);\n  return findStepIndex(effectiveSteps, stepId);\n};\nvar isTooltipPlacement = (placement) => {\n  return placement != null && placement != \"center\";\n};\nvar normalizeStep = (step) => {\n  if (step.type === \"floating\") {\n    return { backdrop: false, arrow: false, placement: \"bottom-end\", ...step };\n  }\n  if (step.target == null || step.type === \"dialog\") {\n    return { type: \"dialog\", placement: \"center\", backdrop: true, ...step };\n  }\n  if (!step.type || step.type === \"tooltip\") {\n    return { type: \"tooltip\", arrow: true, backdrop: true, ...step };\n  }\n  return step;\n};\nvar findStep = (steps, id) => {\n  const res = id != null ? steps.find((step) => step.id === id) : null;\n  return res ? normalizeStep(res) : null;\n};\nvar findStepIndex = (steps, id) => {\n  return id != null ? steps.findIndex((step) => step.id === id) : -1;\n};\n\n// src/tour.connect.ts\nfunction connect(service, normalize) {\n  const { state, context, computed, send, prop, scope } = service;\n  const open = state.hasTag(\"open\");\n  const steps = Array.from(context.get(\"steps\"));\n  const stepIndex = computed(\"stepIndex\");\n  const step = computed(\"step\");\n  const hasTarget = typeof step?.target?.() !== \"undefined\";\n  const hasNextStep = computed(\"hasNextStep\");\n  const hasPrevStep = computed(\"hasPrevStep\");\n  const firstStep = computed(\"isFirstStep\");\n  const lastStep = computed(\"isLastStep\");\n  const placement = context.get(\"currentPlacement\");\n  const targetRect = context.get(\"targetRect\");\n  const popperStyles = getPlacementStyles({\n    strategy: \"absolute\",\n    placement: isTooltipPlacement(placement) ? placement : void 0\n  });\n  const clipPath = getClipPath({\n    enabled: isTooltipStep(step),\n    rect: targetRect,\n    rootSize: context.get(\"boundarySize\"),\n    radius: prop(\"spotlightRadius\")\n  });\n  const actionMap = {\n    next() {\n      send({ type: \"STEP.NEXT\", src: \"actionTrigger\" });\n    },\n    prev() {\n      send({ type: \"STEP.PREV\", src: \"actionTrigger\" });\n    },\n    dismiss() {\n      send({ type: \"DISMISS\", src: \"actionTrigger\" });\n    },\n    skip() {\n      send({ type: \"SKIP\", src: \"actionTrigger\" });\n    },\n    goto(id) {\n      send({ type: \"STEP.SET\", value: id, src: \"actionTrigger\" });\n    }\n  };\n  return {\n    open,\n    totalSteps: steps.length,\n    stepIndex,\n    step,\n    hasNextStep,\n    hasPrevStep,\n    firstStep,\n    lastStep,\n    addStep(step2) {\n      const next = steps.concat(step2);\n      send({ type: \"STEPS.SET\", value: next, src: \"addStep\" });\n    },\n    removeStep(id) {\n      const next = steps.filter((step2) => step2.id !== id);\n      send({ type: \"STEPS.SET\", value: next, src: \"removeStep\" });\n    },\n    updateStep(id, stepOverrides) {\n      const next = steps.map((step2) => step2.id === id ? mergeProps(step2, stepOverrides) : step2);\n      send({ type: \"STEPS.SET\", value: next, src: \"updateStep\" });\n    },\n    setSteps(steps2) {\n      send({ type: \"STEPS.SET\", value: steps2, src: \"setSteps\" });\n    },\n    setStep(id) {\n      send({ type: \"STEP.SET\", value: id });\n    },\n    start(id) {\n      send({ type: \"START\", value: id });\n    },\n    isValidStep(id) {\n      return steps.some((step2) => step2.id === id);\n    },\n    isCurrentStep(id) {\n      return Boolean(step?.id === id);\n    },\n    next() {\n      send({ type: \"STEP.NEXT\" });\n    },\n    prev() {\n      send({ type: \"STEP.PREV\" });\n    },\n    getProgressPercent() {\n      const index = getEffectiveStepIndex(steps, step?.id);\n      const total = getEffectiveSteps(steps).length;\n      return (index + 1) / total * 100;\n    },\n    getProgressText() {\n      const index = getEffectiveStepIndex(steps, step?.id);\n      const total = getEffectiveSteps(steps).length;\n      const details = { current: index, total };\n      return prop(\"translations\").progressText?.(details) ?? \"\";\n    },\n    getBackdropProps() {\n      return normalize.element({\n        ...parts.backdrop.attrs,\n        id: getBackdropId(scope),\n        dir: prop(\"dir\"),\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        style: {\n          \"--tour-layer\": 0,\n          clipPath: isTooltipStep(step) ? `path(\"${clipPath}\")` : void 0,\n          position: \"absolute\",\n          inset: \"0\",\n          willChange: \"clip-path\"\n        }\n      });\n    },\n    getSpotlightProps() {\n      return normalize.element({\n        ...parts.spotlight.attrs,\n        hidden: !open || !step?.target?.(),\n        style: {\n          \"--tour-layer\": 1,\n          position: \"absolute\",\n          width: `${targetRect.width}px`,\n          height: `${targetRect.height}px`,\n          left: `${targetRect.x}px`,\n          top: `${targetRect.y}px`,\n          borderRadius: `${prop(\"spotlightRadius\")}px`,\n          pointerEvents: \"none\"\n        }\n      });\n    },\n    getProgressTextProps() {\n      return normalize.element({\n        ...parts.progressText.attrs\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        ...parts.positioner.attrs,\n        dir: prop(\"dir\"),\n        id: getPositionerId(scope),\n        \"data-type\": step?.type,\n        \"data-placement\": placement,\n        style: {\n          \"--tour-layer\": 2,\n          ...step?.type === \"tooltip\" && popperStyles.floating\n        }\n      });\n    },\n    getArrowProps() {\n      return normalize.element({\n        id: getArrowId(scope),\n        ...parts.arrow.attrs,\n        dir: prop(\"dir\"),\n        hidden: step?.type !== \"tooltip\",\n        style: step?.type === \"tooltip\" ? popperStyles.arrow : void 0,\n        opacity: hasTarget ? void 0 : 0\n      });\n    },\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: prop(\"dir\"),\n        style: popperStyles.arrowTip\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        id: getContentId(scope),\n        dir: prop(\"dir\"),\n        role: \"alertdialog\",\n        \"aria-modal\": \"true\",\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        \"data-placement\": placement,\n        \"data-step\": step?.id,\n        \"aria-labelledby\": getTitleId(scope),\n        \"aria-describedby\": getDescriptionId(scope),\n        tabIndex: -1,\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!prop(\"keyboardNavigation\")) return;\n          const isRtl = prop(\"dir\") === \"rtl\";\n          switch (event.key) {\n            case \"ArrowRight\":\n              if (!hasNextStep) return;\n              send({ type: isRtl ? \"STEP.PREV\" : \"STEP.NEXT\", src: \"keydown\" });\n              break;\n            case \"ArrowLeft\":\n              if (!hasPrevStep) return;\n              send({ type: isRtl ? \"STEP.NEXT\" : \"STEP.PREV\", src: \"keydown\" });\n              break;\n          }\n        }\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: getTitleId(scope),\n        \"data-placement\": hasTarget ? placement : \"center\"\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: getDescriptionId(scope),\n        \"data-placement\": hasTarget ? placement : \"center\"\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.element({\n        ...parts.closeTrigger.attrs,\n        \"data-type\": step?.type,\n        \"aria-label\": prop(\"translations\").close,\n        onClick: actionMap.dismiss\n      });\n    },\n    getActionTriggerProps(props2) {\n      const { action, attrs } = props2.action;\n      let actionProps = {};\n      switch (action) {\n        case \"next\":\n          actionProps = {\n            \"data-type\": \"next\",\n            disabled: !hasNextStep,\n            \"data-disabled\": dataAttr(!hasNextStep),\n            \"aria-label\": prop(\"translations\").nextStep,\n            onClick: actionMap.next\n          };\n          break;\n        case \"prev\":\n          actionProps = {\n            \"data-type\": \"prev\",\n            disabled: !hasPrevStep,\n            \"data-disabled\": dataAttr(!hasPrevStep),\n            \"aria-label\": prop(\"translations\").prevStep,\n            onClick: actionMap.prev\n          };\n          break;\n        case \"dismiss\":\n          actionProps = {\n            \"data-type\": \"close\",\n            \"aria-label\": prop(\"translations\").close,\n            onClick: actionMap.dismiss\n          };\n          break;\n        default:\n          actionProps = {\n            \"data-type\": \"custom\",\n            onClick() {\n              if (typeof action === \"function\") {\n                action(actionMap);\n              }\n            }\n          };\n          break;\n      }\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        ...attrs,\n        ...actionProps\n      });\n    }\n  };\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\nvar normalizeEventPoint = (event) => {\n  let clientX = event.clientX;\n  let clientY = event.clientY;\n  let win = event.view || window;\n  let frame = getFrameElement(win);\n  while (frame) {\n    const iframeRect = frame.getBoundingClientRect();\n    const css = getComputedStyle(frame);\n    const left = iframeRect.left + (frame.clientLeft + parseFloat(css.paddingLeft));\n    const top = iframeRect.top + (frame.clientTop + parseFloat(css.paddingTop));\n    clientX += left;\n    clientY += top;\n    win = getWindow(frame);\n    frame = getFrameElement(win);\n  }\n  return { clientX, clientY };\n};\nfunction isEventInRect(rect, event) {\n  const { clientX, clientY } = normalizeEventPoint(event);\n  return rect.y <= clientY && clientY <= rect.y + rect.height && rect.x <= clientX && clientX <= rect.x + rect.width;\n}\nfunction offset(r, i) {\n  const dx = i.x || 0;\n  const dy = i.y || 0;\n  return {\n    x: r.x - dx,\n    y: r.y - dy,\n    width: r.width + dx + dx,\n    height: r.height + dy + dy\n  };\n}\n\n// src/tour.machine.ts\nvar { and } = createGuards();\nvar machine = createMachine({\n  props({ props: props2 }) {\n    return {\n      preventInteraction: false,\n      closeOnInteractOutside: true,\n      closeOnEscape: true,\n      keyboardNavigation: true,\n      spotlightOffset: { x: 10, y: 10 },\n      spotlightRadius: 4,\n      ...props2,\n      translations: {\n        nextStep: \"next step\",\n        prevStep: \"previous step\",\n        close: \"close tour\",\n        progressText: ({ current, total }) => `${current + 1} of ${total}`,\n        skip: \"skip tour\",\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"tour.inactive\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      steps: bindable(() => ({\n        defaultValue: prop(\"steps\") ?? [],\n        onChange(value) {\n          prop(\"onStepsChange\")?.({ steps: value });\n        }\n      })),\n      stepId: bindable(() => ({\n        defaultValue: prop(\"stepId\"),\n        sync: true,\n        onChange(value) {\n          const context = getContext();\n          const steps = context.get(\"steps\");\n          const stepIndex = findStepIndex(steps, value);\n          const progress = getProgress(steps, stepIndex);\n          const complete = stepIndex == steps.length - 1;\n          prop(\"onStepChange\")?.({ stepId: value, stepIndex, totalSteps: steps.length, complete, progress });\n        }\n      })),\n      resolvedTarget: bindable(() => ({\n        sync: true,\n        defaultValue: null\n      })),\n      targetRect: bindable(() => ({\n        defaultValue: { width: 0, height: 0, x: 0, y: 0 }\n      })),\n      boundarySize: bindable(() => ({\n        defaultValue: { width: 0, height: 0 }\n      })),\n      currentPlacement: bindable(() => ({\n        defaultValue: void 0\n      }))\n    };\n  },\n  computed: {\n    stepIndex: ({ context }) => findStepIndex(context.get(\"steps\"), context.get(\"stepId\")),\n    step: ({ context }) => findStep(context.get(\"steps\"), context.get(\"stepId\")),\n    hasNextStep: ({ context, computed }) => computed(\"stepIndex\") < context.get(\"steps\").length - 1,\n    hasPrevStep: ({ computed }) => computed(\"stepIndex\") > 0,\n    isFirstStep: ({ computed }) => computed(\"stepIndex\") === 0,\n    isLastStep: ({ context, computed }) => computed(\"stepIndex\") === context.get(\"steps\").length - 1,\n    progress: ({ context, computed }) => {\n      const effectiveLength = getEffectiveSteps(context.get(\"steps\")).length;\n      return (computed(\"stepIndex\") + 1) / effectiveLength;\n    }\n  },\n  watch({ track, context, action }) {\n    track([() => context.get(\"stepId\")], () => {\n      queueMicrotask(() => {\n        action([\"setResolvedTarget\", \"raiseStepChange\", \"syncTargetAttrs\"]);\n      });\n    });\n  },\n  effects: [\"trackBoundarySize\"],\n  exit: [\"cleanupAll\"],\n  on: {\n    \"STEPS.SET\": {\n      actions: [\"setSteps\", \"validateSteps\"]\n    },\n    \"STEP.SET\": {\n      actions: [\"setStep\"]\n    },\n    \"STEP.NEXT\": {\n      actions: [\"setNextStep\"]\n    },\n    \"STEP.PREV\": {\n      actions: [\"setPrevStep\"]\n    },\n    \"STEP.CHANGED\": [\n      {\n        guard: and(\"isValidStep\", \"hasResolvedTarget\"),\n        target: \"target.scrolling\",\n        actions: [\"cleanupStepEffect\"]\n      },\n      {\n        guard: and(\"isValidStep\", \"hasTarget\"),\n        target: \"target.resolving\",\n        actions: [\"cleanupStepEffect\"]\n      },\n      {\n        guard: and(\"isValidStep\", \"isWaitingStep\"),\n        target: \"step.waiting\",\n        actions: [\"cleanupStepEffect\"]\n      },\n      {\n        guard: \"isValidStep\",\n        target: \"tour.active\",\n        actions: [\"cleanupStepEffect\"]\n      }\n    ],\n    DISMISS: [\n      {\n        guard: \"isLastStep\",\n        target: \"tour.inactive\",\n        actions: [\"cleanupAll\", \"invokeOnDismiss\", \"invokeOnComplete\", \"clearStep\"]\n      },\n      {\n        target: \"tour.inactive\",\n        actions: [\"cleanupAll\", \"invokeOnDismiss\", \"clearStep\"]\n      }\n    ],\n    SKIP: {\n      target: \"tour.inactive\",\n      actions: [\"cleanupAll\", \"invokeOnSkip\", \"clearStep\"]\n    }\n  },\n  states: {\n    \"tour.inactive\": {\n      tags: [\"closed\"],\n      entry: [\"validateSteps\"],\n      on: {\n        START: {\n          actions: [\"setInitialStep\", \"invokeOnStart\"]\n        }\n      }\n    },\n    \"target.resolving\": {\n      tags: [\"closed\"],\n      effects: [\"waitForTarget\", \"waitForTargetTimeout\"],\n      on: {\n        \"TARGET.NOT_FOUND\": {\n          target: \"tour.inactive\",\n          actions: [\"invokeOnNotFound\", \"clearStep\"]\n        },\n        \"TARGET.RESOLVED\": {\n          target: \"target.scrolling\",\n          actions: [\"setResolvedTarget\"]\n        }\n      }\n    },\n    \"target.scrolling\": {\n      tags: [\"open\"],\n      entry: [\"scrollToTarget\"],\n      effects: [\n        \"waitForScrollEnd\",\n        \"trapFocus\",\n        \"trackPlacement\",\n        \"trackDismissableBranch\",\n        \"trackInteractOutside\",\n        \"trackEscapeKeydown\"\n      ],\n      on: {\n        \"SCROLL.END\": {\n          target: \"tour.active\"\n        }\n      }\n    },\n    \"step.waiting\": {\n      tags: [\"closed\"]\n    },\n    \"tour.active\": {\n      tags: [\"open\"],\n      effects: [\"trapFocus\", \"trackPlacement\", \"trackDismissableBranch\", \"trackInteractOutside\", \"trackEscapeKeydown\"]\n    }\n  },\n  implementations: {\n    guards: {\n      isLastStep: ({ computed, context }) => computed(\"stepIndex\") === context.get(\"steps\").length - 1,\n      isValidStep: ({ context }) => context.get(\"stepId\") != null,\n      hasTarget: ({ computed }) => computed(\"step\")?.target != null,\n      hasResolvedTarget: ({ context }) => context.get(\"resolvedTarget\") != null,\n      isWaitingStep: ({ computed }) => computed(\"step\")?.type === \"wait\"\n    },\n    actions: {\n      scrollToTarget({ context }) {\n        const node = context.get(\"resolvedTarget\");\n        node?.scrollIntoView({ behavior: \"instant\", block: \"center\", inline: \"center\" });\n      },\n      setSteps(params) {\n        const { event, context } = params;\n        context.set(\"steps\", event.value);\n      },\n      setStep(params) {\n        const { event } = params;\n        const step = event.value;\n        if (step == null) return;\n        const manager = new StepManager(params);\n        manager.transitionToStep(step);\n      },\n      clearStep(params) {\n        const manager = new StepManager(params);\n        manager.clear();\n      },\n      setInitialStep(params) {\n        const { context, event } = params;\n        const steps = context.get(\"steps\");\n        if (steps.length === 0) return;\n        const manager = new StepManager(params);\n        manager.transitionToStep(event.value ?? 0);\n      },\n      setNextStep(params) {\n        const { computed } = params;\n        const manager = new StepManager(params);\n        manager.next(computed(\"stepIndex\"));\n      },\n      setPrevStep(params) {\n        const { computed } = params;\n        const manager = new StepManager(params);\n        manager.prev(computed(\"stepIndex\"));\n      },\n      invokeOnStart({ prop, context, computed }) {\n        prop(\"onStatusChange\")?.({\n          status: \"started\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnDismiss({ prop, context, computed }) {\n        prop(\"onStatusChange\")?.({\n          status: \"dismissed\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnComplete({ prop, context, computed }) {\n        prop(\"onStatusChange\")?.({\n          status: \"completed\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnSkip({ prop, context, computed }) {\n        prop(\"onStatusChange\")?.({\n          status: \"skipped\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      invokeOnNotFound({ prop, context, computed }) {\n        prop(\"onStatusChange\")?.({\n          status: \"not-found\",\n          stepId: context.get(\"stepId\"),\n          stepIndex: computed(\"stepIndex\")\n        });\n      },\n      raiseStepChange({ send }) {\n        send({ type: \"STEP.CHANGED\" });\n      },\n      setResolvedTarget({ context, event, computed }) {\n        const node = event.node ?? computed(\"step\")?.target?.();\n        context.set(\"resolvedTarget\", node ?? null);\n      },\n      syncTargetAttrs(params) {\n        const { context } = params;\n        const targetEl = context.get(\"resolvedTarget\");\n        const manager = new StepManager(params);\n        manager.syncTarget(targetEl);\n      },\n      cleanupAll(params) {\n        const manager = new StepManager(params);\n        manager.cleanupAll();\n      },\n      cleanupStepEffect(params) {\n        const manager = new StepManager(params);\n        manager.cleanupStepEffect();\n      },\n      validateSteps({ context }) {\n        const ids = /* @__PURE__ */ new Set();\n        context.get(\"steps\").forEach((step) => {\n          if (ids.has(step.id)) {\n            throw new Error(`[zag-js/tour] Duplicate step id: ${step.id}`);\n          }\n          if (step.target == null && step.type == null) {\n            throw new Error(`[zag-js/tour] Step ${step.id} has no target or type. At least one of those is required.`);\n          }\n          ids.add(step.id);\n        });\n      }\n    },\n    effects: {\n      waitForScrollEnd({ send }) {\n        const id = setTimeout(() => {\n          send({ type: \"SCROLL.END\" });\n        }, 100);\n        return () => clearTimeout(id);\n      },\n      waitForTargetTimeout({ send }) {\n        const id = setTimeout(() => {\n          send({ type: \"TARGET.NOT_FOUND\" });\n        }, 3e3);\n        return () => clearTimeout(id);\n      },\n      waitForTarget({ scope, computed, send }) {\n        const step = computed(\"step\");\n        if (!step) return;\n        const targetEl = step.target;\n        const win = scope.getWin();\n        const rootNode = scope.getRootNode();\n        const observer = new win.MutationObserver(() => {\n          const node = targetEl?.();\n          if (node) {\n            send({ type: \"TARGET.RESOLVED\", node });\n            observer.disconnect();\n          }\n        });\n        observer.observe(rootNode, {\n          childList: true,\n          subtree: true,\n          characterData: true\n        });\n        return () => {\n          observer.disconnect();\n        };\n      },\n      trackBoundarySize({ context, scope }) {\n        const win = scope.getWin();\n        const doc = scope.getDoc();\n        const onResize = () => {\n          const width = visualViewport?.width ?? win.innerWidth;\n          const height = doc.documentElement.scrollHeight;\n          context.set(\"boundarySize\", { width, height });\n        };\n        onResize();\n        const viewport = win.visualViewport ?? win;\n        viewport.addEventListener(\"resize\", onResize);\n        return () => viewport.removeEventListener(\"resize\", onResize);\n      },\n      trackEscapeKeydown({ scope, send, prop }) {\n        if (!prop(\"closeOnEscape\")) return;\n        const doc = scope.getDoc();\n        const onKeyDown = (event) => {\n          if (event.key === \"Escape\") {\n            event.preventDefault();\n            event.stopPropagation();\n            send({ type: \"DISMISS\", src: \"esc\" });\n          }\n        };\n        doc.addEventListener(\"keydown\", onKeyDown, true);\n        return () => {\n          doc.removeEventListener(\"keydown\", onKeyDown, true);\n        };\n      },\n      trackInteractOutside({ context, computed, scope, send, prop }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trackInteractOutside(contentEl, {\n          defer: true,\n          exclude(target) {\n            return contains(step.target?.(), target);\n          },\n          onFocusOutside(event) {\n            prop(\"onFocusOutside\")?.(event);\n            if (!prop(\"closeOnInteractOutside\")) {\n              event.preventDefault();\n            }\n          },\n          onPointerDownOutside(event) {\n            prop(\"onPointerDownOutside\")?.(event);\n            const isWithin = isEventInRect(context.get(\"targetRect\"), event.detail.originalEvent);\n            if (isWithin) {\n              event.preventDefault();\n              return;\n            }\n            if (!prop(\"closeOnInteractOutside\")) {\n              event.preventDefault();\n            }\n          },\n          onInteractOutside(event) {\n            prop(\"onInteractOutside\")?.(event);\n            if (event.defaultPrevented) return;\n            send({ type: \"DISMISS\", src: \"interact-outside\" });\n          }\n        });\n      },\n      trackDismissableBranch({ computed, scope }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trackDismissableBranch(contentEl, { defer: true });\n      },\n      trapFocus({ computed, scope }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        const contentEl = () => getContentEl(scope);\n        return trapFocus(contentEl, {\n          escapeDeactivates: false,\n          allowOutsideClick: true,\n          preventScroll: true,\n          returnFocusOnDeactivate: false,\n          getShadowRoot: true\n        });\n      },\n      trackPlacement({ context, computed, scope, prop }) {\n        const step = computed(\"step\");\n        if (step == null) return;\n        context.set(\"currentPlacement\", step.placement ?? \"bottom\");\n        if (isDialogStep(step)) {\n          return syncZIndex(scope);\n        }\n        if (!isTooltipStep(step)) {\n          return;\n        }\n        const positionerEl = () => getPositionerEl(scope);\n        return getPlacement(context.get(\"resolvedTarget\"), positionerEl, {\n          defer: true,\n          placement: step.placement ?? \"bottom\",\n          strategy: \"absolute\",\n          gutter: 10,\n          offset: step.offset,\n          getAnchorRect(el) {\n            if (!isHTMLElement(el)) return null;\n            const rect = el.getBoundingClientRect();\n            return offset(rect, prop(\"spotlightOffset\"));\n          },\n          onComplete(data) {\n            const { rects } = data.middlewareData;\n            context.set(\"currentPlacement\", data.placement);\n            context.set(\"targetRect\", rects.reference);\n          }\n        });\n      }\n    }\n  }\n});\nvar StepManager = class {\n  constructor(params) {\n    this.params = params;\n  }\n  /**\n   * Transition to a step by id or index\n   */\n  transitionToStep(step) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = isString(step) ? findStepIndex(steps, step) : step;\n    this.transitionTo(idx);\n  }\n  /**\n   * Transition to the next step from the given index\n   */\n  next(currentIndex) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = nextIndex(steps, currentIndex);\n    this.transitionTo(idx);\n  }\n  /**\n   * Transition to the previous step from the given index\n   */\n  prev(currentIndex) {\n    const steps = this.params.context.get(\"steps\");\n    const idx = prevIndex(steps, currentIndex);\n    this.transitionTo(idx);\n  }\n  /**\n   * Clear the current step and reset tour state\n   */\n  clear() {\n    const { context } = this.params;\n    context.set(\"targetRect\", { width: 0, height: 0, x: 0, y: 0 });\n    context.set(\"resolvedTarget\", null);\n    this.transitionTo(-1);\n  }\n  /**\n   * Cleanup all resources including effects, target attributes, and resolved target.\n   * Use when completely tearing down the tour or transitioning between steps.\n   */\n  cleanupAll() {\n    const { refs } = this.params;\n    refs.get(\"_targetCleanup\")?.();\n    refs.set(\"_targetCleanup\", void 0);\n    refs.set(\"_prevTarget\", void 0);\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n  }\n  /**\n   * Cleanup only the step effect cleanup function.\n   * Skips cleanup if an effect is currently running.\n   */\n  cleanupStepEffect() {\n    const { refs } = this.params;\n    if (refs.get(\"_runningEffect\")) {\n      return;\n    }\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n  }\n  /**\n   * Sync target element attributes (inert, data-tour-highlighted).\n   * Handles cleanup of previous target and applies attributes to new target.\n   */\n  syncTarget(targetEl) {\n    const { refs, prop } = this.params;\n    const prevTarget = refs.get(\"_prevTarget\");\n    if (targetEl !== prevTarget) {\n      refs.get(\"_targetCleanup\")?.();\n      refs.set(\"_targetCleanup\", void 0);\n    }\n    if (!targetEl) {\n      refs.set(\"_prevTarget\", null);\n      return;\n    }\n    if (targetEl === prevTarget) {\n      return;\n    }\n    if (prop(\"preventInteraction\")) targetEl.inert = true;\n    targetEl.setAttribute(\"data-tour-highlighted\", \"\");\n    refs.set(\"_targetCleanup\", () => {\n      if (prop(\"preventInteraction\")) targetEl.inert = false;\n      targetEl.removeAttribute(\"data-tour-highlighted\");\n    });\n    refs.set(\"_prevTarget\", targetEl);\n  }\n  /**\n   * Transition to a step by index\n   */\n  transitionTo(idx) {\n    const { context, refs } = this.params;\n    const steps = context.get(\"steps\");\n    const step = steps[idx];\n    if (!step) {\n      context.set(\"stepId\", null);\n      return;\n    }\n    if (isEqual(context.get(\"stepId\"), step.id)) {\n      refs.set(\"_runningEffect\", false);\n      return;\n    }\n    this.cleanup();\n    const utilities = this.createUtilities(step, idx);\n    if (step.effect) {\n      this.executeEffect(step, utilities);\n    } else {\n      utilities.show();\n    }\n  }\n  /**\n   * Clean up previous step effects and target attributes\n   */\n  cleanup() {\n    const { refs } = this.params;\n    refs.get(\"_effectCleanup\")?.();\n    refs.set(\"_effectCleanup\", void 0);\n    refs.get(\"_targetCleanup\")?.();\n    refs.set(\"_targetCleanup\", void 0);\n  }\n  /**\n   * Create utility functions for step effects\n   */\n  createUtilities(step, idx) {\n    const { context, computed, prop } = this.params;\n    const steps = context.get(\"steps\");\n    return {\n      show: () => {\n        context.set(\"stepId\", step.id);\n      },\n      update: (data) => {\n        context.set(\"steps\", (prev) => prev.map((s, i) => i === idx ? { ...s, ...data } : s));\n      },\n      next: () => {\n        const nextIdx = nextIndex(steps, computed(\"stepIndex\"));\n        this.transitionTo(nextIdx);\n      },\n      goto: (id) => {\n        const targetIdx = findStepIndex(steps, id);\n        if (targetIdx === -1) {\n          warn(`[zag-js/tour] Step with id \"${id}\" not found`);\n          return;\n        }\n        this.transitionTo(targetIdx);\n      },\n      dismiss: () => {\n        context.set(\"stepId\", null);\n        prop(\"onStatusChange\")?.({ status: \"dismissed\", stepId: null, stepIndex: -1 });\n      },\n      target: step.target\n    };\n  }\n  /**\n   * Execute a step's effect function\n   */\n  executeEffect(step, utilities) {\n    const { refs } = this.params;\n    refs.set(\"_runningEffect\", true);\n    let cleanup;\n    try {\n      cleanup = step.effect(utilities);\n    } catch (error) {\n      refs.set(\"_runningEffect\", false);\n      console.error(error);\n      return;\n    }\n    refs.set(\"_effectCleanup\", cleanup);\n    if (isWaitStep(step)) {\n      utilities.show();\n    }\n    queueMicrotask(() => {\n      queueMicrotask(() => {\n        refs.set(\"_runningEffect\", false);\n      });\n    });\n  }\n};\nvar props = createProps()([\n  \"closeOnEscape\",\n  \"closeOnInteractOutside\",\n  \"dir\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"keyboardNavigation\",\n  \"onFocusOutside\",\n  \"onInteractOutside\",\n  \"onPointerDownOutside\",\n  \"onStatusChange\",\n  \"onStepChange\",\n  \"onStepsChange\",\n  \"preventInteraction\",\n  \"spotlightOffset\",\n  \"spotlightRadius\",\n  \"stepId\",\n  \"steps\",\n  \"translations\"\n]);\nvar splitProps = createSplitProps(props);\nfunction waitForElementValue(target, value, options) {\n  const { timeout, rootNode } = options;\n  const win = getWindow(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(\n    new Promise((resolve) => {\n      const el = target();\n      if (!el) return;\n      const checkValue = () => {\n        if (el.value === value) {\n          resolve();\n          el.removeEventListener(\"input\", checkValue);\n        }\n      };\n      checkValue();\n      el.addEventListener(\"input\", checkValue, { signal: controller.signal });\n    }),\n    controller,\n    timeout\n  );\n}\n\nexport { anatomy, connect, machine, props, splitProps, waitForElementValue };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}