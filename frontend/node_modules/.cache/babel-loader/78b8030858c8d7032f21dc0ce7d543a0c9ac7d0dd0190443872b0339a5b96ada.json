{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { raf, addDomEvent, getWindow, contains, getEventTarget, dataAttr, visuallyHiddenStyle } from '@zag-js/dom-query';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize, getFileEntries } from '@zag-js/file-utils';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { warn, callAll, createSplitProps, flatArray } from '@zag-js/utils';\nimport { createMachine } from '@zag-js/core';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\"root\", \"dropzone\", \"item\", \"itemDeleteTrigger\", \"itemGroup\", \"itemName\", \"itemPreview\", \"itemPreviewImage\", \"itemSizeText\", \"label\", \"trigger\", \"clearTrigger\");\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = ctx => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = ctx => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = ctx => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = ctx => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = ctx => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = ctx => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = ctx => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = ctx => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some(type => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount, currentAcceptedFiles) {\n  const {\n    prop,\n    computed\n  } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + currentAcceptedFiles.length === 2) return true;\n  if (incomingCount + currentAcceptedFiles.length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getEventFiles(ctx, files, currentAcceptedFiles = [], currentRejectedFiles = []) {\n  const {\n    prop,\n    computed\n  } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  const validateParams = {\n    acceptedFiles: currentAcceptedFiles,\n    rejectedFiles: currentRejectedFiles\n  };\n  files.forEach(file => {\n    const [accepted, acceptError] = isValidFileType(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = isValidFileSize(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, validateParams);\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...(validateErrors ?? []));\n      rejectedFiles.push({\n        file,\n        errors: errors.filter(Boolean)\n      });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length, currentAcceptedFiles)) {\n    acceptedFiles.forEach(file => {\n      rejectedFiles.push({\n        file,\n        errors: [\"TOO_MANY_FILES\"]\n      });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = getWindow(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach(file => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {}\n}\n\n// src/file-upload.connect.ts\nvar DEFAULT_ITEM_TYPE = \"accepted\";\nvar INTERACTIVE_SELECTOR = \"button, a[href], input:not([type='file']), select, textarea, [tabindex], [contenteditable]\";\nfunction isInteractiveTarget(element, container) {\n  if (!element || element.getAttribute(\"type\") === \"file\") return false;\n  const interactive = element.closest(INTERACTIVE_SELECTOR);\n  return interactive != container && contains(container, interactive);\n}\nfunction connect(service, normalize) {\n  const {\n    state,\n    send,\n    prop,\n    computed,\n    scope,\n    context\n  } = service;\n  const disabled = !!prop(\"disabled\");\n  const required = !!prop(\"required\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    transforming: context.get(\"transforming\"),\n    openFilePicker() {\n      if (disabled) return;\n      send({\n        type: \"OPEN\"\n      });\n    },\n    deleteFile(file, type = DEFAULT_ITEM_TYPE) {\n      send({\n        type: \"FILE.DELETE\",\n        file,\n        itemType: type\n      });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      send({\n        type: \"FILES.SET\",\n        files,\n        count: files.length\n      });\n    },\n    clearRejectedFiles() {\n      send({\n        type: \"REJECTED_FILES.CLEAR\"\n      });\n    },\n    clearFiles() {\n      send({\n        type: \"FILES.CLEAR\"\n      });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({\n        type: \"FILES.SET\",\n        files\n      });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          const target = getEventTarget(event);\n          if (!contains(event.currentTarget, target)) return;\n          if (isInteractiveTarget(target, event.currentTarget)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({\n            type: \"DROPZONE.CLICK\",\n            src: \"keydown\"\n          });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          const target = getEventTarget(event);\n          if (!contains(event.currentTarget, target)) return;\n          if (isInteractiveTarget(target, event.currentTarget)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({\n            type: \"DROPZONE.CLICK\"\n          });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {}\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({\n            type: \"DROPZONE.DRAG_OVER\",\n            count\n          });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({\n            type: \"DROPZONE.DRAG_LEAVE\"\n          });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          getFileEntries(event.dataTransfer.items, prop(\"directory\")).then(files => {\n            send({\n              type: \"DROPZONE.DROP\",\n              files: flatArray(files)\n            });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({\n            type: \"DROPZONE.FOCUS\"\n          });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({\n            type: \"DROPZONE.BLUR\"\n          });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({\n            type: \"OPEN\"\n          });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const {\n            files\n          } = event.currentTarget;\n          send({\n            type: \"FILE.SELECT\",\n            files: files ? Array.from(files) : []\n          });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps(props2 = {}) {\n      const {\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemProps(props2) {\n      const {\n        file,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemNameProps(props2) {\n      const {\n        file,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const {\n        file,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemPreviewProps(props2) {\n      const {\n        file,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const {\n        file,\n        url,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const {\n        file,\n        type = DEFAULT_ITEM_TYPE\n      } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type,\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({\n            type: \"FILE.DELETE\",\n            file,\n            itemType: type\n          });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-required\": dataAttr(required)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({\n            type: \"FILES.CLEAR\"\n          });\n        }\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      defaultAcceptedFiles: [],\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: file => `preview of ${file.name}`,\n        deleteFile: file => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({\n    prop,\n    bindable,\n    getContext\n  }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: prop(\"defaultAcceptedFiles\"),\n        value: prop(\"acceptedFiles\"),\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file, b[i])),\n        hash(value) {\n          return value.map(file => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({\n            files: value\n          });\n          prop(\"onFileChange\")?.({\n            acceptedFiles: value,\n            rejectedFiles: ctx.get(\"rejectedFiles\")\n          });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({\n            files: value\n          });\n          prop(\"onFileChange\")?.({\n            acceptedFiles: ctx.get(\"acceptedFiles\"),\n            rejectedFiles: value\n          });\n        }\n      })),\n      transforming: bindable(() => ({\n        defaultValue: false\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({\n      prop\n    }) => getAcceptAttrString(prop(\"accept\")),\n    multiple: ({\n      prop\n    }) => prop(\"maxFiles\") > 1\n  },\n  watch({\n    track,\n    context,\n    action\n  }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFiles\"]\n    },\n    \"FILE.SELECT\": {\n      actions: [\"setEventFiles\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setEventFiles\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({\n        prop,\n        scope\n      }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = event => {\n          event?.preventDefault();\n        };\n        const onDrop = event => {\n          if (contains(getRootEl(scope), getEventTarget(event))) return;\n          event.preventDefault();\n        };\n        return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({\n        scope,\n        context\n      }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", {\n            bubbles: true\n          }));\n        });\n      },\n      openFilePicker({\n        scope\n      }) {\n        raf(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFiles(params) {\n        const {\n          computed,\n          context,\n          event\n        } = params;\n        const {\n          acceptedFiles,\n          rejectedFiles\n        } = getEventFiles(params, event.files);\n        context.set(\"acceptedFiles\", computed(\"multiple\") ? acceptedFiles : acceptedFiles.length > 0 ? [acceptedFiles[0]] : []);\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      setEventFiles(params) {\n        const {\n          computed,\n          context,\n          event,\n          prop\n        } = params;\n        const currentAcceptedFiles = context.get(\"acceptedFiles\");\n        const currentRejectedFiles = context.get(\"rejectedFiles\");\n        const {\n          acceptedFiles,\n          rejectedFiles\n        } = getEventFiles(params, event.files, currentAcceptedFiles, currentRejectedFiles);\n        const set = files => {\n          if (computed(\"multiple\")) {\n            context.set(\"acceptedFiles\", prev => [...prev, ...files]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (files.length) {\n            context.set(\"acceptedFiles\", [files[0]]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (rejectedFiles.length) {\n            context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n            context.set(\"rejectedFiles\", rejectedFiles);\n          }\n        };\n        const transform = prop(\"transformFiles\");\n        if (transform) {\n          context.set(\"transforming\", true);\n          transform(acceptedFiles).then(set).catch(err => {\n            warn(`[zag-js/file-upload] error transforming files\n${err}`);\n          }).finally(() => {\n            context.set(\"transforming\", false);\n          });\n        } else {\n          set(acceptedFiles);\n        }\n      },\n      removeFile({\n        context,\n        event\n      }) {\n        if (event.itemType === \"rejected\") {\n          const rejectedFiles = context.get(\"rejectedFiles\").filter(item => !isFileEqual(item.file, event.file));\n          context.set(\"rejectedFiles\", rejectedFiles);\n        } else {\n          const files = context.get(\"acceptedFiles\").filter(file => !isFileEqual(file, event.file));\n          context.set(\"acceptedFiles\", files);\n        }\n      },\n      clearRejectedFiles({\n        context\n      }) {\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({\n        context\n      }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = createProps()([\"accept\", \"acceptedFiles\", \"allowDrop\", \"capture\", \"defaultAcceptedFiles\", \"dir\", \"directory\", \"disabled\", \"getRootNode\", \"id\", \"ids\", \"invalid\", \"locale\", \"maxFiles\", \"maxFileSize\", \"minFileSize\", \"name\", \"onFileAccept\", \"onFileChange\", \"onFileReject\", \"preventDocumentDrop\", \"required\", \"transformFiles\", \"translations\", \"validate\"]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\", \"type\"]);\nvar splitItemProps = createSplitProps(itemProps);\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };","map":{"version":3,"names":["createAnatomy","raf","addDomEvent","getWindow","contains","getEventTarget","dataAttr","visuallyHiddenStyle","getAcceptAttrString","isFileEqual","isValidFileType","isValidFileSize","getFileEntries","formatBytes","createProps","warn","callAll","createSplitProps","flatArray","createMachine","anatomy","parts","build","getRootId","ctx","ids","root","id","getDropzoneId","dropzone","getHiddenInputId","hiddenInput","getTriggerId","trigger","getLabelId","label","getItemId","item","getItemNameId","itemName","getItemSizeTextId","itemSizeText","getItemPreviewId","itemPreview","getRootEl","getById","getHiddenInputEl","getDropzoneEl","isEventWithFiles","event","target","dataTransfer","types","some","type","isFilesWithinRange","incomingCount","currentAcceptedFiles","prop","computed","length","getEventFiles","files","currentRejectedFiles","acceptedFiles","rejectedFiles","validateParams","forEach","file","accepted","acceptError","sizeMatch","sizeError","validateErrors","valid","push","errors","filter","Boolean","splice","setInputFiles","inputEl","win","DataTransfer","items","add","DEFAULT_ITEM_TYPE","INTERACTIVE_SELECTOR","isInteractiveTarget","element","container","getAttribute","interactive","closest","connect","service","normalize","state","send","scope","context","disabled","required","allowDrop","translations","dragging","matches","focused","transforming","get","openFilePicker","deleteFile","itemType","setFiles","count","clearRejectedFiles","clearFiles","getFileSize","size","createFileUrl","cb","getWin","url","URL","createObjectURL","revokeObjectURL","setClipboardFiles","dt","Array","from","reduce","acc","kind","getAsFile","getRootProps","attrs","dir","getDropzoneProps","props2","tabIndex","disableClick","role","onKeyDown","defaultPrevented","currentTarget","key","src","onClick","localName","preventDefault","onDragOver","stopPropagation","dropEffect","hasFiles","onDragLeave","relatedTarget","onDrop","then","onFocus","onBlur","getTriggerProps","button","getHiddenInputProps","input","capture","name","accept","webkitdirectory","multiple","value","onInput","style","getItemGroupProps","itemGroup","getItemProps","getItemNameProps","getItemSizeTextProps","getItemPreviewProps","getItemPreviewImageProps","isImage","startsWith","Error","img","itemPreviewImage","alt","getItemDeleteTriggerProps","itemDeleteTrigger","getLabelProps","htmlFor","getClearTriggerProps","clearTrigger","hidden","machine","props","minFileSize","maxFileSize","Number","POSITIVE_INFINITY","maxFiles","preventDocumentDrop","defaultAcceptedFiles","initialState","bindable","getContext","defaultValue","isEqual","a","b","every","i","hash","map","join","onChange","acceptAttr","watch","track","action","on","actions","effects","states","idle","OPEN","implementations","doc","getDoc","syncInputElement","queueMicrotask","dispatchEvent","Event","bubbles","click","params","set","setEventFiles","prev","transform","catch","err","finally","removeFile","splitProps","itemProps","splitItemProps"],"sources":["D:/ML AI321- FALL 25/ML_PROJECT_HEALTHCARE_AAAHH/frontend/node_modules/@zag-js/file-upload/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { raf, addDomEvent, getWindow, contains, getEventTarget, dataAttr, visuallyHiddenStyle } from '@zag-js/dom-query';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize, getFileEntries } from '@zag-js/file-utils';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { warn, callAll, createSplitProps, flatArray } from '@zag-js/utils';\nimport { createMachine } from '@zag-js/core';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\n  \"root\",\n  \"dropzone\",\n  \"item\",\n  \"itemDeleteTrigger\",\n  \"itemGroup\",\n  \"itemName\",\n  \"itemPreview\",\n  \"itemPreviewImage\",\n  \"itemSizeText\",\n  \"label\",\n  \"trigger\",\n  \"clearTrigger\"\n);\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = (ctx) => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = (ctx) => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = (ctx) => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = (ctx) => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = (ctx) => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = (ctx) => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = (ctx) => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some((type) => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount, currentAcceptedFiles) {\n  const { prop, computed } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + currentAcceptedFiles.length === 2) return true;\n  if (incomingCount + currentAcceptedFiles.length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getEventFiles(ctx, files, currentAcceptedFiles = [], currentRejectedFiles = []) {\n  const { prop, computed } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  const validateParams = {\n    acceptedFiles: currentAcceptedFiles,\n    rejectedFiles: currentRejectedFiles\n  };\n  files.forEach((file) => {\n    const [accepted, acceptError] = isValidFileType(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = isValidFileSize(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, validateParams);\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...validateErrors ?? []);\n      rejectedFiles.push({ file, errors: errors.filter(Boolean) });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length, currentAcceptedFiles)) {\n    acceptedFiles.forEach((file) => {\n      rejectedFiles.push({ file, errors: [\"TOO_MANY_FILES\"] });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = getWindow(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach((file) => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {\n  }\n}\n\n// src/file-upload.connect.ts\nvar DEFAULT_ITEM_TYPE = \"accepted\";\nvar INTERACTIVE_SELECTOR = \"button, a[href], input:not([type='file']), select, textarea, [tabindex], [contenteditable]\";\nfunction isInteractiveTarget(element, container) {\n  if (!element || element.getAttribute(\"type\") === \"file\") return false;\n  const interactive = element.closest(INTERACTIVE_SELECTOR);\n  return interactive != container && contains(container, interactive);\n}\nfunction connect(service, normalize) {\n  const { state, send, prop, computed, scope, context } = service;\n  const disabled = !!prop(\"disabled\");\n  const required = !!prop(\"required\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    transforming: context.get(\"transforming\"),\n    openFilePicker() {\n      if (disabled) return;\n      send({ type: \"OPEN\" });\n    },\n    deleteFile(file, type = DEFAULT_ITEM_TYPE) {\n      send({ type: \"FILE.DELETE\", file, itemType: type });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      send({ type: \"FILES.SET\", files, count: files.length });\n    },\n    clearRejectedFiles() {\n      send({ type: \"REJECTED_FILES.CLEAR\" });\n    },\n    clearFiles() {\n      send({ type: \"FILES.CLEAR\" });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({ type: \"FILES.SET\", files });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          const target = getEventTarget(event);\n          if (!contains(event.currentTarget, target)) return;\n          if (isInteractiveTarget(target, event.currentTarget)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({ type: \"DROPZONE.CLICK\", src: \"keydown\" });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          const target = getEventTarget(event);\n          if (!contains(event.currentTarget, target)) return;\n          if (isInteractiveTarget(target, event.currentTarget)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({ type: \"DROPZONE.CLICK\" });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({ type: \"DROPZONE.DRAG_OVER\", count });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({ type: \"DROPZONE.DRAG_LEAVE\" });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          getFileEntries(event.dataTransfer.items, prop(\"directory\")).then((files) => {\n            send({ type: \"DROPZONE.DROP\", files: flatArray(files) });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.FOCUS\" });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.BLUR\" });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({ type: \"OPEN\" });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const { files } = event.currentTarget;\n          send({ type: \"FILE.SELECT\", files: files ? Array.from(files) : [] });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps(props2 = {}) {\n      const { type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemProps(props2) {\n      const { file, type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemNameProps(props2) {\n      const { file, type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const { file, type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemPreviewProps(props2) {\n      const { file, type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const { file, url, type = DEFAULT_ITEM_TYPE } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const { file, type = DEFAULT_ITEM_TYPE } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-type\": type,\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({ type: \"FILE.DELETE\", file, itemType: type });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-required\": dataAttr(required)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({ type: \"FILES.CLEAR\" });\n        }\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({ props: props2 }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      defaultAcceptedFiles: [],\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: (file) => `preview of ${file.name}`,\n        deleteFile: (file) => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: prop(\"defaultAcceptedFiles\"),\n        value: prop(\"acceptedFiles\"),\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file, b[i])),\n        hash(value) {\n          return value.map((file) => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: value, rejectedFiles: ctx.get(\"rejectedFiles\") });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: ctx.get(\"acceptedFiles\"), rejectedFiles: value });\n        }\n      })),\n      transforming: bindable(() => ({\n        defaultValue: false\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({ prop }) => getAcceptAttrString(prop(\"accept\")),\n    multiple: ({ prop }) => prop(\"maxFiles\") > 1\n  },\n  watch({ track, context, action }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFiles\"]\n    },\n    \"FILE.SELECT\": {\n      actions: [\"setEventFiles\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setEventFiles\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({ prop, scope }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = (event) => {\n          event?.preventDefault();\n        };\n        const onDrop = (event) => {\n          if (contains(getRootEl(scope), getEventTarget(event))) return;\n          event.preventDefault();\n        };\n        return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({ scope, context }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", { bubbles: true }));\n        });\n      },\n      openFilePicker({ scope }) {\n        raf(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFiles(params) {\n        const { computed, context, event } = params;\n        const { acceptedFiles, rejectedFiles } = getEventFiles(params, event.files);\n        context.set(\n          \"acceptedFiles\",\n          computed(\"multiple\") ? acceptedFiles : acceptedFiles.length > 0 ? [acceptedFiles[0]] : []\n        );\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      setEventFiles(params) {\n        const { computed, context, event, prop } = params;\n        const currentAcceptedFiles = context.get(\"acceptedFiles\");\n        const currentRejectedFiles = context.get(\"rejectedFiles\");\n        const { acceptedFiles, rejectedFiles } = getEventFiles(\n          params,\n          event.files,\n          currentAcceptedFiles,\n          currentRejectedFiles\n        );\n        const set = (files) => {\n          if (computed(\"multiple\")) {\n            context.set(\"acceptedFiles\", (prev) => [...prev, ...files]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (files.length) {\n            context.set(\"acceptedFiles\", [files[0]]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (rejectedFiles.length) {\n            context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n            context.set(\"rejectedFiles\", rejectedFiles);\n          }\n        };\n        const transform = prop(\"transformFiles\");\n        if (transform) {\n          context.set(\"transforming\", true);\n          transform(acceptedFiles).then(set).catch((err) => {\n            warn(`[zag-js/file-upload] error transforming files\n${err}`);\n          }).finally(() => {\n            context.set(\"transforming\", false);\n          });\n        } else {\n          set(acceptedFiles);\n        }\n      },\n      removeFile({ context, event }) {\n        if (event.itemType === \"rejected\") {\n          const rejectedFiles = context.get(\"rejectedFiles\").filter((item) => !isFileEqual(item.file, event.file));\n          context.set(\"rejectedFiles\", rejectedFiles);\n        } else {\n          const files = context.get(\"acceptedFiles\").filter((file) => !isFileEqual(file, event.file));\n          context.set(\"acceptedFiles\", files);\n        }\n      },\n      clearRejectedFiles({ context }) {\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({ context }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = createProps()([\n  \"accept\",\n  \"acceptedFiles\",\n  \"allowDrop\",\n  \"capture\",\n  \"defaultAcceptedFiles\",\n  \"dir\",\n  \"directory\",\n  \"disabled\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"invalid\",\n  \"locale\",\n  \"maxFiles\",\n  \"maxFileSize\",\n  \"minFileSize\",\n  \"name\",\n  \"onFileAccept\",\n  \"onFileChange\",\n  \"onFileReject\",\n  \"preventDocumentDrop\",\n  \"required\",\n  \"transformFiles\",\n  \"translations\",\n  \"validate\"\n]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\", \"type\"]);\nvar splitItemProps = createSplitProps(itemProps);\n\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}